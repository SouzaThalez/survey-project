import{B as A,E as K,G as Y,H as D,I as G,J as V,K as H,L as q,M as J,N as $,O as z,P as Q,Q as W,R as X,S as Z,T as ee,V as te,X as ie,Y as oe,Z as re,aa as ne,b as k,c as d,d as I,e as N,g as L,j as F,m as R,p as T,q as B,r as U,w as j}from"./chunk-RHOIU2IA.js";import{Aa as i,Ba as t,Bb as x,Ca as M,Fb as P,J as u,Ka as c,Nb as O,Ob as y,Qb as v,Za as o,_a as S,fa as m,ja as f,ma as C,na as g,qa as b,wa as w,za as p}from"./chunk-Y5DITQPJ.js";function se(n,a){n&1&&(i(0,"mat-error"),o(1," Informe um email v\xE1lido. "),t())}function pe(n,a){n&1&&(i(0,"mat-error"),o(1," M\xEDnimo de 6 caracteres. "),t())}var _=class n{constructor(a,r,e){this.fb=a;this.snack=r;this.router=e;this.form=this.fb.nonNullable.group({email:this.fb.nonNullable.control("",{validators:[d.required,d.email]}),password:this.fb.nonNullable.control("",{validators:[d.required,d.minLength(6)]}),remember:this.fb.nonNullable.control(!0)})}USERS_KEY="usersStore";AUTH_KEY="authUser";REMEMBER_KEY="rememberEmail";loading=!1;showPass=!1;form;ngOnInit(){if(localStorage.getItem(this.AUTH_KEY)){this.router.navigate(["/private"]);return}let r=localStorage.getItem(this.REMEMBER_KEY);r&&this.form.controls.email.setValue(r)}signIn(){if(this.form.invalid||this.loading){this.form.markAllAsTouched();return}let{email:a,password:r,remember:e}=this.form.getRawValue();this.loading=!0;try{let s=localStorage.getItem(this.USERS_KEY),l=(s?JSON.parse(s):[]).find(E=>E.email?.toLowerCase().trim()===a.toLowerCase().trim()&&E.password===r);if(!l){this.snack.open("Credenciais inv\xE1lidas.","Ok",{duration:2e3});return}let le={id:l.id,email:l.email,name:`${l.firstName} ${l.lastName}`.trim(),role:l.role};localStorage.setItem(this.AUTH_KEY,JSON.stringify(le)),e?localStorage.setItem(this.REMEMBER_KEY,l.email):localStorage.removeItem(this.REMEMBER_KEY),this.snack.open("Login realizado!","Ok",{duration:1200}),this.router.navigate(["/private"])}catch{this.snack.open("Erro ao ler usu\xE1rios locais.","Ok",{duration:2e3})}finally{this.loading=!1}}goToUsers(){this.router.navigate(["/private/painel-usuario"])}static \u0275fac=function(r){return new(r||n)(f(T),f(D),f(O))};static \u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!1,decls:40,vars:7,consts:[[1,"answer-page"],[1,"paper"],[1,"title"],[1,"disclaimer"],["routerLink","/private/painel-usuario"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","type","email","formControlName","email","placeholder","seu@email.com"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"type"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"row"],["formControlName","remember"],[1,"link",3,"click"],[1,"actions"],["mat-button","","type","button",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Entrar"),t(),i(4,"p",3),o(5," Acesse com seu email e senha. Para testes, voc\xEA pode criar usu\xE1rios em "),i(6,"a",4),o(7,"Painel de Usu\xE1rios"),t(),o(8,". "),t(),M(9,"mat-divider"),i(10,"form",5),c("ngSubmit",function(){return e.signIn()}),i(11,"mat-form-field",6)(12,"mat-label"),o(13,"Email"),t(),M(14,"input",7),i(15,"mat-icon",8),o(16,"mail"),t(),b(17,se,2,0,"mat-error",9),t(),i(18,"mat-form-field",6)(19,"mat-label"),o(20,"Senha"),t(),M(21,"input",10),i(22,"button",11),c("click",function(){return e.showPass=!e.showPass}),i(23,"mat-icon"),o(24),t()(),b(25,pe,2,0,"mat-error",9),t(),i(26,"div",12)(27,"mat-checkbox",13),o(28,"Lembrar-me"),t(),i(29,"a",14),c("click",function(){return e.goToUsers()}),o(30,"Criar conta"),t()(),i(31,"div",15)(32,"button",16),c("click",function(){return e.form.reset()}),i(33,"mat-icon"),o(34,"refresh"),t(),o(35," Limpar "),t(),i(36,"button",17)(37,"mat-icon"),o(38,"login"),t(),o(39," Entrar "),t()()()()()),r&2&&(m(10),p("formGroup",e.form),m(7),p("ngIf",e.form.controls.email.touched&&e.form.controls.email.invalid),m(4),p("type",e.showPass?"text":"password"),m(),w("aria-label",e.showPass?"Ocultar senha":"Mostrar senha"),m(2),S(e.showPass?"visibility_off":"visibility"),m(),p("ngIf",e.form.controls.password.touched&&e.form.controls.password.invalid),m(11),p("disabled",e.loading||e.form.invalid))},dependencies:[x,y,J,G,V,H,q,z,K,A,W,L,k,I,N,Z,F,R],styles:['@charset "UTF-8";.answer-page[_ngcontent-%COMP%]{background:#f2f2f2 url(/assets/bg-blur.jpg) no-repeat center/cover;min-height:100vh;min-height:100dvh;padding:24px}.answer-page[_ngcontent-%COMP%]   .paper[_ngcontent-%COMP%]{max-width:480px;width:100%;margin:calc(56px + env(safe-area-inset-top)) auto 24px;background:#fff;border-radius:12px;box-shadow:0 8px 24px #00000014;padding:24px 28px}.answer-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:700}.answer-page[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]{color:#70757a;margin:4px 0 16px}.answer-page[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]   a.link[_ngcontent-%COMP%], .answer-page[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none}.answer-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{margin-top:14px;display:grid;gap:12px}.answer-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.answer-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#3f51b5;cursor:pointer;-webkit-user-select:none;user-select:none}.answer-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:4px;gap:10px}@media (max-width: 600px){.answer-page[_ngcontent-%COMP%]   .paper[_ngcontent-%COMP%]{margin:24px auto;padding:20px 22px}}']})};var ce=[{path:"",component:_}],h=class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=g({type:n});static \u0275inj=u({imports:[v.forChild(ce),v]})};var me=class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=g({type:n});static \u0275inj=u({imports:[P,h,$,Q,ne,Y,X,B,ee,U,re,oe,ie,te,j]})};export{me as PublicModule};
